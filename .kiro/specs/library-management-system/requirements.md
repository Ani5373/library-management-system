# 需求文档

## 简介

图书馆管理系统是一个基于 Web 的应用程序，旨在为图书馆提供完整的数字化管理解决方案。系统支持读者借阅、管理员管理、出版物管理、预约系统、罚款管理、通知系统等核心功能。前端使用 Vue.js 框架构建，提供现代化的用户界面和良好的用户体验。

## 术语表

- **系统（System）**: 图书馆管理系统 Web 应用程序
- **读者（Reader）**: 注册用户，可以借阅和归还出版物
- **管理员（Admin）**: 系统管理人员，负责出版物和读者管理
- **超级管理员（SuperAdmin）**: 最高权限管理员，负责系统配置和管理员管理
- **出版物（Publication）**: 图书馆中的书籍、期刊或电子书
- **书籍（Book）**: 实体图书，借阅期限为 30 天
- **期刊（Magazine）**: 实体期刊，借阅期限为 7 天
- **电子书（EBook）**: 数字出版物，支持在线阅读和下载
- **借阅记录（BorrowRecord）**: 记录读者借阅出版物的详细信息
- **预约记录（Reservation）**: 记录读者预约出版物的请求
- **罚款记录（Fine）**: 记录因逾期归还产生的罚款
- **通知（Notification）**: 系统发送给用户的消息提醒
- **信用分数（CreditScore）**: 读者的信用评分，影响借阅权限
- **借阅上限（BorrowLimit）**: 读者可同时借阅的最大出版物数量

## 需求

### 需求 1：用户认证与授权

**用户故事：** 作为用户，我希望能够安全地登录系统，以便访问相应权限的功能

#### 验收标准

1. WHEN 用户输入有效的用户名和密码 THEN 系统 SHALL 验证凭据并授予访问权限
2. WHEN 用户输入无效的凭据 THEN 系统 SHALL 拒绝访问并显示错误消息
3. WHEN 用户成功登录 THEN 系统 SHALL 记录最后登录时间并创建会话
4. WHEN 用户请求登出 THEN 系统 SHALL 清除会话并重定向到登录页面
5. WHEN 用户会话过期 THEN 系统 SHALL 要求重新登录

### 需求 2：读者出版物查询

**用户故事：** 作为读者，我希望能够搜索和浏览出版物信息，以便找到我需要的资料

#### 验收标准

1. WHEN 读者输入标题关键词 THEN 系统 SHALL 返回标题匹配的出版物列表
2. WHEN 读者输入作者名称 THEN 系统 SHALL 返回该作者的所有出版物
3. WHEN 读者输入 ISBN 或 ISSN THEN 系统 SHALL 返回对应的出版物详细信息
4. WHEN 读者选择分类目录 THEN 系统 SHALL 显示该分类下的所有出版物
5. WHEN 读者查看出版物详情 THEN 系统 SHALL 显示标题、作者、出版社、状态、可借数量、平均评分等信息
6. WHEN 读者使用高级搜索 THEN 系统 SHALL 支持多条件组合查询

### 需求 3：读者借阅管理

**用户故事：** 作为读者，我希望能够借阅和归还出版物，以便使用图书馆资源

#### 验收标准

1. WHEN 读者请求借阅出版物且满足借阅资格 THEN 系统 SHALL 创建借阅记录并减少可借数量
2. WHEN 读者已借数量达到上限 THEN 系统 SHALL 拒绝借阅请求并提示已达上限
3. WHEN 读者信用分数低于阈值 THEN 系统 SHALL 拒绝借阅请求并提示信用不足
4. WHEN 读者归还出版物 THEN 系统 SHALL 更新借阅记录状态并增加可借数量
5. WHEN 读者归还逾期出版物 THEN 系统 SHALL 计算逾期天数并生成罚款记录
6. WHEN 读者请求续借且未达最大续借次数 THEN 系统 SHALL 延长应还日期并增加续借次数
7. WHEN 读者请求续借但已达最大续借次数 THEN 系统 SHALL 拒绝续借请求

### 需求 4：读者预约系统

**用户故事：** 作为读者，我希望能够预约当前不可借的出版物，以便在出版物可用时获得通知

#### 验收标准

1. WHEN 读者预约不可借的出版物 THEN 系统 SHALL 创建预约记录并设置优先级
2. WHEN 出版物变为可借状态且存在预约 THEN 系统 SHALL 按优先级通知预约读者
3. WHEN 读者取消预约 THEN 系统 SHALL 删除预约记录并通知下一位预约者
4. WHEN 预约记录超过过期日期 THEN 系统 SHALL 自动取消预约并通知下一位预约者
5. WHEN 读者已预约某出版物 THEN 系统 SHALL 阻止重复预约

### 需求 5：读者罚款管理

**用户故事：** 作为读者，我希望能够查看和支付罚款，以便恢复借阅权限

#### 验收标准

1. WHEN 读者逾期归还出版物 THEN 系统 SHALL 按每天 0.5 元计算罚款金额
2. WHEN 读者查看罚款记录 THEN 系统 SHALL 显示所有未支付和已支付的罚款
3. WHEN 读者支付罚款 THEN 系统 SHALL 更新罚款状态并减少读者罚款总额
4. WHEN 读者有未支付罚款超过阈值 THEN 系统 SHALL 限制借阅权限

### 需求 6：读者评价系统

**用户故事：** 作为读者，我希望能够评价和评论出版物，以便分享阅读体验

#### 验收标准

1. WHEN 读者提交评价 THEN 系统 SHALL 保存评分和评论内容
2. WHEN 读者提交评价 THEN 系统 SHALL 更新出版物的平均评分和评分总数
3. WHEN 读者编辑自己的评论 THEN 系统 SHALL 更新评论内容和评分
4. WHEN 读者删除自己的评论 THEN 系统 SHALL 移除评论并重新计算平均评分
5. WHEN 其他读者查看出版物 THEN 系统 SHALL 显示所有评论和评分

### 需求 7：读者通知系统

**用户故事：** 作为读者，我希望能够接收系统通知，以便及时了解借阅状态和重要信息

#### 验收标准

1. WHEN 借阅即将到期 THEN 系统 SHALL 发送到期提醒通知
2. WHEN 借阅已逾期 THEN 系统 SHALL 发送逾期通知
3. WHEN 预约的出版物可借 THEN 系统 SHALL 发送预约到书通知
4. WHEN 读者登录系统 THEN 系统 SHALL 显示未读通知数量
5. WHEN 读者查看通知 THEN 系统 SHALL 标记为已读

### 需求 8：管理员出版物管理

**用户故事：** 作为管理员，我希望能够管理出版物信息，以便维护图书馆馆藏

#### 验收标准

1. WHEN 管理员上架新出版物 THEN 系统 SHALL 创建出版物记录并设置初始库存
2. WHEN 管理员上架书籍 THEN 系统 SHALL 设置借阅期限为 30 天
3. WHEN 管理员上架期刊 THEN 系统 SHALL 设置借阅期限为 7 天
4. WHEN 管理员修改出版物信息 THEN 系统 SHALL 更新出版物记录
5. WHEN 管理员下架出版物 THEN 系统 SHALL 更新出版物状态为不可借
6. WHEN 管理员为出版物分配分类 THEN 系统 SHALL 关联出版物与分类目录

### 需求 9：管理员读者管理

**用户故事：** 作为管理员，我希望能够管理读者账户，以便维护用户信息

#### 验收标准

1. WHEN 管理员注册新读者 THEN 系统 SHALL 创建读者账户并设置初始借阅上限为 7
2. WHEN 管理员注册新读者 THEN 系统 SHALL 设置初始信用分数为 100
3. WHEN 管理员修改读者信息 THEN 系统 SHALL 更新读者记录
4. WHEN 管理员查看读者详情 THEN 系统 SHALL 显示借阅历史、罚款记录和信用分数

### 需求 10：管理员借阅处理

**用户故事：** 作为管理员，我希望能够处理借阅和归还操作，以便协助读者使用图书馆

#### 验收标准

1. WHEN 管理员为读者办理借阅 THEN 系统 SHALL 验证借阅资格并创建借阅记录
2. WHEN 管理员为读者办理归还 THEN 系统 SHALL 更新借阅记录并检查是否逾期
3. WHEN 管理员处理预约 THEN 系统 SHALL 通知预约读者并保留出版物
4. WHEN 管理员减免罚款 THEN 系统 SHALL 更新罚款记录状态

### 需求 11：管理员统计报表

**用户故事：** 作为管理员，我希望能够查看系统统计信息，以便了解图书馆运营状况

#### 验收标准

1. WHEN 管理员查看统计信息 THEN 系统 SHALL 显示出版物总数、读者总数、借阅总数
2. WHEN 管理员查看统计信息 THEN 系统 SHALL 显示当前借阅数、逾期数量、罚款总额
3. WHEN 管理员查看热门出版物 THEN 系统 SHALL 按借阅次数排序显示
4. WHEN 管理员查看活跃读者 THEN 系统 SHALL 按借阅次数排序显示
5. WHEN 管理员生成报表 THEN 系统 SHALL 创建报表记录并支持导出

### 需求 12：超级管理员系统管理

**用户故事：** 作为超级管理员，我希望能够管理系统配置和管理员账户，以便维护系统运行

#### 验收标准

1. WHEN 超级管理员注册新管理员 THEN 系统 SHALL 创建管理员账户并分配角色
2. WHEN 超级管理员删除管理员 THEN 系统 SHALL 禁用管理员账户
3. WHEN 超级管理员配置系统参数 THEN 系统 SHALL 更新借阅规则配置
4. WHEN 超级管理员请求数据备份 THEN 系统 SHALL 导出数据库备份文件
5. WHEN 超级管理员请求数据恢复 THEN 系统 SHALL 从备份文件恢复数据

### 需求 13：分类目录管理

**用户故事：** 作为管理员，我希望能够管理分类目录，以便组织出版物

#### 验收标准

1. WHEN 管理员创建分类 THEN 系统 SHALL 创建分类记录并支持设置父分类
2. WHEN 管理员创建子分类 THEN 系统 SHALL 关联父分类和子分类
3. WHEN 管理员修改分类信息 THEN 系统 SHALL 更新分类记录
4. WHEN 读者浏览分类 THEN 系统 SHALL 显示分类树形结构
5. WHEN 读者选择分类 THEN 系统 SHALL 显示该分类及其子分类下的所有出版物

### 需求 14：电子书管理

**用户故事：** 作为读者，我希望能够在线阅读和下载电子书，以便使用数字资源

#### 验收标准

1. WHEN 读者请求下载电子书 THEN 系统 SHALL 提供下载链接并增加下载次数
2. WHEN 读者在线阅读电子书 THEN 系统 SHALL 检查同时在线用户数限制
3. WHEN 同时在线用户数达到上限 THEN 系统 SHALL 拒绝新的在线阅读请求
4. WHEN 读者查看电子书详情 THEN 系统 SHALL 显示文件格式、文件大小和下载次数

### 需求 15：个性化推荐

**用户故事：** 作为读者，我希望能够获得个性化推荐，以便发现感兴趣的出版物

#### 验收标准

1. WHEN 读者请求推荐 THEN 系统 SHALL 基于借阅历史分析读者偏好
2. WHEN 读者请求推荐 THEN 系统 SHALL 返回相似分类或作者的出版物
3. WHEN 读者请求推荐 THEN 系统 SHALL 优先推荐高评分出版物
4. WHEN 读者查看推荐列表 THEN 系统 SHALL 显示推荐理由

### 需求 16：响应式界面设计

**用户故事：** 作为用户，我希望能够在不同设备上使用系统，以便随时随地访问

#### 验收标准

1. WHEN 用户在桌面浏览器访问 THEN 系统 SHALL 显示完整功能的桌面布局
2. WHEN 用户在平板设备访问 THEN 系统 SHALL 自动调整为平板适配布局
3. WHEN 用户在移动设备访问 THEN 系统 SHALL 显示移动优化的简化布局
4. WHEN 用户调整浏览器窗口大小 THEN 系统 SHALL 动态调整布局

### 需求 17：数据验证与错误处理

**用户故事：** 作为用户，我希望系统能够验证输入并提供清晰的错误提示，以便正确使用系统

#### 验收标准

1. WHEN 用户提交表单数据 THEN 系统 SHALL 验证所有必填字段
2. WHEN 用户输入无效的邮箱格式 THEN 系统 SHALL 显示格式错误提示
3. WHEN 用户输入无效的电话号码 THEN 系统 SHALL 显示格式错误提示
4. WHEN 系统发生错误 THEN 系统 SHALL 显示用户友好的错误消息
5. WHEN 网络请求失败 THEN 系统 SHALL 提示用户并提供重试选项

### 需求 18：会员等级系统

**用户故事：** 作为读者，我希望能够通过积累信用获得更高的会员等级，以便享受更多权益

#### 验收标准

1. WHEN 读者按时归还出版物 THEN 系统 SHALL 增加信用分数
2. WHEN 读者逾期归还出版物 THEN 系统 SHALL 减少信用分数
3. WHEN 读者信用分数达到阈值 THEN 系统 SHALL 提升会员等级
4. WHEN 读者会员等级提升 THEN 系统 SHALL 增加借阅上限
5. WHEN 读者查看个人信息 THEN 系统 SHALL 显示当前会员等级和信用分数
