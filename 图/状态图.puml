@startuml 状态图
' 状态图方向（可选）
left to right direction

' 初始状态
[*] --> 初始

' 主状态
state 初始
state 可借
state 已借出
state 已预约
state 不可借

' 主流程：初始 → 可借 ⇄ 已借出 → 已预约
初始 --> 可借 : 上架/可借
可借 --> 已借出 : 借出
已借出 --> 可借 : 归还
已借出 --> 已预约 : 预约

' 任意状态可以流向不可借
初始 --> 不可借 : 标记为不可借
可借 --> 不可借 : 标记为不可借
已借出 --> 不可借 : 标记为不可借
已预约 --> 不可借 : 标记为不可借

' 不可借可以回到其他业务状态（按你原流程的“三向箭头”理解）
不可借 --> 可借 : 重新上架
不可借 --> 已借出 : 强制出借/数据修复
不可借 --> 已预约 : 恢复预约

' 结束状态（如果有需要）
' 已预约 --> [*]
' 不可借 --> [*]

@enduml